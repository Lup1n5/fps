<!DOCTYPE html>
<html>
<head><script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script></head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
var player;
var bullets = [];
var enemies = [];
var score = 0;

function setup() {
  createCanvas(800, 600);
  player = createVector(width / 2, height - 50);
}

function draw() {
  background(255);
  
  // Draw player
  fill('blue');
  rect(player.x, player.y, 50, 50);
  
  // Draw bullets
  fill('red');
  for(var i = 0; i < bullets.length; i++) {
    var bullet = bullets[i];
    rect(bullet.x, bullet.y, 5, 10);
    bullet.y -= 2;
    if(bullet.y < 0) {
      bullets.splice(i, 1);
      i--;
    }
  }
  
  // Draw enemies
  fill('green');
  for(var i = 0; i < enemies.length; i++) {
    var enemy = enemies[i];
    rect(enemy.x, enemy.y, 20, 20);
    enemy.y += 1;
    if(enemy.y > height) {
      enemies.splice(i, 1);
      i--;
    }
  }
  
  // Spawn enemies
  if(random() < 0.01) {
    enemies.push(createVector(random(width - 20), -20));
  }
  
  // Check collisions
  for(var i = 0; i < enemies.length; i++) {
    var enemy = enemies[i];
    for(var j = 0; j < bullets.length; j++) {
      var bullet = bullets[j];
      if(bullet.x < enemy.x + 20 && bullet.x + 5 > enemy.x &&
         bullet.y < enemy.y + 20 && bullet.y + 10 > enemy.y) {
        enemies.splice(i, 1);
        i--;
        bullets.splice(j, 1);
        j--;
        score++;
        break;
      }
    }
  }
  
  // Display score
  fill('black');
  textSize(24);
  text('Score: ' + score, 10, 30);
}

function mouseMoved() {
  player.x = mouseX - 25;
}

function mouseClicked() {
  bullets.push(createVector(player.x + 25, player.y));
}

</script>
</body>
</html>
