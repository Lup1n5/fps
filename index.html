<!DOCTYPE html>
<html>
<head><script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script></head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
var canvas = document.getElementById('gameCanvas');
var ctx = canvas.getContext('2d');

var player = {
  x: canvas.width / 2,
  y: canvas.height - 50,
  width: 69,
  height: 69
};

var bullets = [];
var enemies = [];
var score = 0;

function drawPlayer() {
  ctx.fillStyle = 'blue';
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

function drawBullets() {
  ctx.fillStyle = 'red';
  for(var i = 0; i < bullets.length; i++) {
    var bullet = bullets[i];
    ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
  }
}

function drawEnemies() {
  ctx.fillStyle = 'green';
  for(var i = 0; i < enemies.length; i++) {
    var enemy = enemies[i];
    ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
  }
}

function updateBullets() {
  for(var i = 0; i < bullets.length; i++) {
    var bullet = bullets[i];
    bullet.y -= 2;
    if(bullet.y < 0) {
      bullets.splice(i, 1);
      i--;
    }
  }
}

function updateEnemies() {
  for(var i = 0; i < enemies.length; i++) {
    var enemy = enemies[i];
    enemy.y += 1;
    if(enemy.y > canvas.height) {
      enemies.splice(i, 1);
      i--;
    }
  }
}

function spawnEnemy() {
  enemies.push({
    x: Math.random() * (canvas.width - 20),
    y: -20,
    width: 40,
    height: 40
  });
}

function checkCollisions() {
  for(var i = 0; i < enemies.length; i++) {
    var enemy = enemies[i];
    for(var j = 0; j < bullets.length; j++) {
      var bullet = bullets[j];
      if(bullet.x < enemy.x + enemy.width &&
         bullet.x + bullet.width > enemy.x &&
         bullet.y < enemy.y + enemy.height &&
         bullet.y + bullet.height > enemy.y) {
        enemies.splice(i, 1);
        i--;
        bullets.splice(j, 1);
        j--;
        score++;
        break;
      }
    }
  }
}

canvas.addEventListener('mousemove', function(e) {
  player.x = e.clientX - player.width / 2;
});

canvas.addEventListener('click', function(e) {
  bullets.push({
    x: player.x + player.width / 2,
    y: player.y,
    width: 5,
    height: 10
  });
});

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPlayer();
  drawBullets();
  drawEnemies();
  updateBullets();
  updateEnemies();
  checkCollisions();
  if(Math.random() < 0.01) {
    spawnEnemy();
  }
  ctx.fillStyle = 'black';
  ctx.font = '24px Arial';
  ctx.fillText('Score: ' + score, 10, 30);
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
